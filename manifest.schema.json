{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://pedlargames.com/schemas/manifest.schema.json",
  "title": "Pedlar Games Content Manifest",
  "description": "Schema for the Pedlar Games content manifest file",
  "type": "object",
  "required": ["version", "lastUpdated", "games", "tools", "articles", "blog"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Semantic version of the manifest schema",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "lastUpdated": {
      "type": "string",
      "description": "ISO 8601 timestamp of the last manifest update",
      "format": "date-time"
    },
    "games": {
      "type": "object",
      "description": "Collection of game entries",
      "required": ["published", "wip"],
      "properties": {
        "published": {
          "type": "array",
          "description": "Released games",
          "items": {
            "$ref": "#/definitions/publishedGame"
          }
        },
        "wip": {
          "type": "array",
          "description": "Work-in-progress games",
          "items": {
            "$ref": "#/definitions/wipGame"
          }
        }
      }
    },
    "tools": {
      "type": "array",
      "description": "Development tools and utilities",
      "items": {
        "$ref": "#/definitions/tool"
      }
    },
    "articles": {
      "type": "array",
      "description": "Technical articles and tutorials",
      "items": {
        "$ref": "#/definitions/article"
      }
    },
    "blog": {
      "type": "array",
      "description": "Blog posts and devlogs",
      "items": {
        "$ref": "#/definitions/blogPost"
      }
    }
  },
  "definitions": {
    "download": {
      "oneOf": [
        {
          "type": "string",
          "description": "Simple relative path (legacy format)",
          "pattern": "^downloads/"
        },
        {
          "type": "object",
          "description": "Detailed download information with external URLs",
          "required": ["filename", "url"],
          "properties": {
            "filename": {
              "type": "string",
              "description": "Name of the downloadable file"
            },
            "platform": {
              "type": "string",
              "description": "Target platform (Windows, macOS, Linux, etc.)"
            },
            "version": {
              "type": "string",
              "description": "Version of the download"
            },
            "size": {
              "type": "integer",
              "description": "File size in bytes"
            },
            "sizeFormatted": {
              "type": "string",
              "description": "Human-readable file size"
            },
            "url": {
              "type": "string",
              "description": "Direct download URL (can be external CDN or GitHub Release)",
              "format": "uri"
            },
            "checksums": {
              "type": "object",
              "description": "File integrity checksums",
              "properties": {
                "sha256": {
                  "type": "string"
                },
                "md5": {
                  "type": "string"
                }
              }
            }
          }
        }
      ]
    },
    "publishedGame": {
      "type": "object",
      "required": ["slug", "title", "path", "coverImage", "releaseDate"],
      "properties": {
        "slug": {
          "type": "string",
          "description": "Unique URL-friendly identifier",
          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Display title of the game",
          "minLength": 1
        },
        "path": {
          "type": "string",
          "description": "Relative path to the game directory",
          "pattern": "^content/games/published/"
        },
        "coverImage": {
          "type": "string",
          "description": "Filename of the cover image",
          "pattern": "\\.(jpg|jpeg|png|webp)$"
        },
        "gallery": {
          "type": "array",
          "description": "Array of gallery image paths relative to game directory",
          "items": {
            "type": "string",
            "pattern": "^gallery/.*\\.(jpg|jpeg|png|webp)$"
          }
        },
        "downloads": {
          "type": "array",
          "description": "Array of downloads (string paths or detailed objects)",
          "items": {
            "$ref": "#/definitions/download"
          }
        },
        "releaseDate": {
          "type": "string",
          "description": "Release date in YYYY-MM-DD format",
          "format": "date"
        },
        "featured": {
          "type": "boolean",
          "description": "Whether to feature on the homepage",
          "default": false
        }
      }
    },
    "wipGame": {
      "type": "object",
      "required": ["slug", "title", "path", "coverImage", "status", "expectedRelease"],
      "properties": {
        "slug": {
          "type": "string",
          "description": "Unique URL-friendly identifier",
          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Display title of the game",
          "minLength": 1
        },
        "path": {
          "type": "string",
          "description": "Relative path to the game directory",
          "pattern": "^content/games/wip/"
        },
        "coverImage": {
          "type": "string",
          "description": "Filename of the cover image",
          "pattern": "\\.(jpg|jpeg|png|webp)$"
        },
        "gallery": {
          "type": "array",
          "description": "Array of gallery image paths relative to game directory",
          "items": {
            "type": "string",
            "pattern": "^gallery/.*\\.(jpg|jpeg|png|webp)$"
          }
        },
        "status": {
          "type": "string",
          "description": "Development status",
          "enum": ["wip"]
        },
        "expectedRelease": {
          "type": "string",
          "description": "Expected release date in YYYY-MM-DD format",
          "format": "date"
        },
        "featured": {
          "type": "boolean",
          "description": "Whether to feature on the homepage",
          "default": false
        }
      }
    },
    "tool": {
      "type": "object",
      "required": ["slug", "title", "path", "coverImage", "version", "releaseDate"],
      "properties": {
        "slug": {
          "type": "string",
          "description": "Unique URL-friendly identifier",
          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Display title of the tool",
          "minLength": 1
        },
        "path": {
          "type": "string",
          "description": "Relative path to the tool directory",
          "pattern": "^content/tools/"
        },
        "coverImage": {
          "type": "string",
          "description": "Filename of the cover image",
          "pattern": "\\.(jpg|jpeg|png|webp)$"
        },
        "downloads": {
          "type": "array",
          "description": "Array of downloads (string paths or detailed objects)",
          "items": {
            "$ref": "#/definitions/download"
          }
        },
        "version": {
          "type": "string",
          "description": "Current version number",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "releaseDate": {
          "type": "string",
          "description": "Release date in YYYY-MM-DD format",
          "format": "date"
        },
        "featured": {
          "type": "boolean",
          "description": "Whether to feature on the homepage",
          "default": false
        }
      }
    },
    "article": {
      "type": "object",
      "required": ["slug", "title", "path", "date", "category"],
      "properties": {
        "slug": {
          "type": "string",
          "description": "Unique URL-friendly identifier",
          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Display title of the article",
          "minLength": 1
        },
        "path": {
          "type": "string",
          "description": "Relative path to the article directory",
          "pattern": "^content/articles/\\d{4}-\\d{2}-\\d{2}-"
        },
        "date": {
          "type": "string",
          "description": "Publication date in YYYY-MM-DD format",
          "format": "date"
        },
        "category": {
          "type": "string",
          "description": "Article category",
          "minLength": 1
        },
        "featured": {
          "type": "boolean",
          "description": "Whether to feature on the homepage",
          "default": false
        }
      }
    },
    "blogPost": {
      "type": "object",
      "required": ["slug", "title", "path", "date", "category"],
      "properties": {
        "slug": {
          "type": "string",
          "description": "Unique URL-friendly identifier",
          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Display title of the blog post",
          "minLength": 1
        },
        "path": {
          "type": "string",
          "description": "Relative path to the blog post directory",
          "pattern": "^content/blog/\\d{4}-\\d{2}-\\d{2}-"
        },
        "date": {
          "type": "string",
          "description": "Publication date in YYYY-MM-DD format",
          "format": "date"
        },
        "category": {
          "type": "string",
          "description": "Blog post category",
          "minLength": 1
        }
      }
    }
  }
}
